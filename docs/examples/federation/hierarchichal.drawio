<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36" version="27.1.6">
  <diagram name="Prometheus Federation" id="prometheus-federation">
    <mxGraphModel dx="1426" dy="709" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="federation-server" value="Federation Prometheus&#xa;:9090&#xa;(Master/Aggregator)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE6CC;strokeColor=#D79B00;fontSize=14;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="450" y="50" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="source-prom-1" value="Source Prometheus 1&#xa;:9090&#xa;Web Services" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DAE8FC;strokeColor=#6C8EBF;fontSize=12;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="150" y="250" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="source-prom-2" value="Source Prometheus 2&#xa;:9090&#xa;Databases" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DAE8FC;strokeColor=#6C8EBF;fontSize=12;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="450" y="250" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="source-prom-3" value="Source Prometheus 3&#xa;:9090&#xa;Infrastructure" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DAE8FC;strokeColor=#6C8EBF;fontSize=12;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="750" y="250" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="arrow-1" value="GET /federate&#xa;every 15s" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#D79B00;strokeWidth=2;fontSize=10;" parent="1" source="federation-server" target="source-prom-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-2" value="GET /federate&#xa;every 15s" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#D79B00;strokeWidth=2;fontSize=10;" parent="1" source="federation-server" target="source-prom-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-3" value="GET /federate&#xa;every 15s" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#D79B00;strokeWidth=2;fontSize=10;" parent="1" source="federation-server" target="source-prom-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="targets-1" value="Targets:&#xa;â€¢ app1:8080&#xa;â€¢ app2:8080&#xa;â€¢ nginx:9113" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="150" y="380" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="targets-2" value="Targets:&#xa;â€¢ mysql:3306&#xa;â€¢ redis:6379&#xa;â€¢ postgres:5432" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="450" y="380" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="targets-3" value="Targets:&#xa;â€¢ node1:9100&#xa;â€¢ node2:9100&#xa;â€¢ docker:9323" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="750" y="380" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="target-arrow-1" value="scrape" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#82B366;strokeWidth=1;fontSize=9;" parent="1" source="source-prom-1" target="targets-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="target-arrow-2" value="scrape" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#82B366;strokeWidth=1;fontSize=9;" parent="1" source="source-prom-2" target="targets-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="target-arrow-3" value="scrape" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#82B366;strokeWidth=1;fontSize=9;" parent="1" source="source-prom-3" target="targets-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="config-box" value="Federation Config:&#xa;&#xa;match[]:&#xa;â€¢ {job=&quot;prometheus&quot;}&#xa;â€¢ {__name__=~&quot;job:.*&quot;}&#xa;&#xa;scrape_interval: 15s&#xa;honor_labels: true" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF2CC;strokeColor=#D6B656;fontSize=10;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="330" y="100" width="130" height="110" as="geometry" />
        </mxCell>
        <mxCell id="title" value="Prometheus Federation Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="400" y="10" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="legend" value="Legend:&#xa;ðŸŸ  Federation Server&#xa;ðŸ”µ Source Prometheus&#xa;ðŸŸ¢ Monitored Targets" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8CECC;strokeColor=#B85450;fontSize=10;align=left;" parent="1" vertex="1">
          <mxGeometry x="950" y="50" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="Hr5k4QWM6j3Gn2mOS4Nw-1" value="" style="points=[];aspect=fixed;html=1;align=center;shadow=0;dashed=0;fillColor=#FF6A00;strokeColor=none;shape=mxgraph.alibaba_cloud.prometheus;" vertex="1" parent="1">
          <mxGeometry x="620" y="100" width="48.9" height="48.9" as="geometry" />
        </mxCell>
        <mxCell id="Hr5k4QWM6j3Gn2mOS4Nw-2" value="" style="points=[];aspect=fixed;html=1;align=center;shadow=0;dashed=0;fillColor=#FF6A00;strokeColor=none;shape=mxgraph.alibaba_cloud.prometheus;" vertex="1" parent="1">
          <mxGeometry x="910" y="260.55" width="48.9" height="48.9" as="geometry" />
        </mxCell>
        <mxCell id="Hr5k4QWM6j3Gn2mOS4Nw-3" value="" style="points=[];aspect=fixed;html=1;align=center;shadow=0;dashed=0;fillColor=#FF6A00;strokeColor=none;shape=mxgraph.alibaba_cloud.prometheus;" vertex="1" parent="1">
          <mxGeometry x="610" y="260.55" width="48.9" height="48.9" as="geometry" />
        </mxCell>
        <mxCell id="Hr5k4QWM6j3Gn2mOS4Nw-4" value="" style="points=[];aspect=fixed;html=1;align=center;shadow=0;dashed=0;fillColor=#FF6A00;strokeColor=none;shape=mxgraph.alibaba_cloud.prometheus;" vertex="1" parent="1">
          <mxGeometry x="310" y="260.55" width="48.9" height="48.9" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
